@model ADAMS.Areas.AccountPermissionManagement.ViewModels.GroupPermissionManagement.GroupPermissionDetailViewModel

@{
    ViewData["Title"] = "查看群組權限";
}

<h4>查看權限：@Model.GroupName</h4>
<hr />

<div class="mb-3">
    <a asp-action="Index" class="btn btn-secondary btn-sm">返回列表</a>
</div>

<div class="border rounded p-3">
    @{
        var parents = Model.Functions
            .Where(f => f.FLevel == 1)
            .OrderBy(f => f.Sort)
            .ToList();
    }

    @foreach (var parent in parents)
    {
        var children = Model.Functions
            .Where(f => f.UpperFunctionSN == parent.FunctionSN)
            .OrderBy(f => f.Sort)
            .ToList();

        <div class="mb-2">
            <strong>@parent.CName</strong>
        </div>

        <div class="mb-3 d-flex flex-wrap">
            @foreach (var child in children)
            {
                <div class="form-check me-3 mb-1">
                    <input class="form-check-input"
                           type="checkbox"
                           disabled
                           @(child.HasPermission ? "checked" : "") />

                    <label class="form-check-label">
                        @child.CName
                    </label>
                </div>
            }
        </div>

        <hr />
    }
</div>
